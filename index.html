<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AneStation</title>
    <meta name="description" content="AneStation — a retro-console inspired desktop experience." />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <a class="skip" href="#top">Skip to content</a>

    <header class="nav" role="banner">
      <div class="navInner">
        <a class="brand" href="#top">AneStation</a>
        <nav aria-label="Primary">
          <a href="#how">How it works</a>
          <a href="#features">Features</a>
          <a href="#gallery">Gallery</a>
          <a href="#download">Download</a>
          <a href="#status">Status</a>
          <a href="#faq">FAQ</a>
        </nav>
      </div>
    </header>

    <main class="wrap" id="top">
      <section class="hero">
        <div class="heroGrid">
          <div class="heroText">
            <p class="kicker">AneStation</p>
            <h1>Retro-console inspired desktop experience.</h1>
            <p class="sub">
              Insert media, boot games, and enjoy a console-like launcher UI.
            </p>

            <div class="cta">
              <a class="btn" id="downloadBtn" href="#download">Download</a>
              <a class="btn secondary" href="https://github.com/Neburb/AneStation" target="_blank" rel="noreferrer">GitHub</a>
            </div>

            <p class="meta" id="releaseMeta" aria-live="polite"></p>
          </div>

          <div class="heroPreview" aria-label="Preview">
            <div class="crt">
              <div class="placeholder">
                <strong>Screenshot / video placeholder</strong>
                <p>Put a short capture here: Main → Menu → Apps/Options.</p>
              </div>
            </div>
            <p class="hint">Tip: a 6–10s looped mp4/webm looks great here.</p>
          </div>
        </div>
      </section>

      <section id="how" class="section split">
        <div class="splitText">
          <h2>How it works</h2>
          <p class="lead">AneStation is designed to behave like a console BIOS: insert media, it’s detected, you’re ready to launch.</p>
          <ol class="steps">
            <li><strong>Insert media</strong> — USB/SD with a <code>media.yml</code> at the root.</li>
            <li><strong>Detect & show</strong> — game name, artwork, and optional metadata.</li>
            <li><strong>Launch</strong> — gamepad-friendly navigation and instant boot flow.</li>
          </ol>
        </div>
        <div class="splitMedia">
          <div class="crt">
            <div class="placeholder">
              <strong>How-it-works screenshot</strong>
              <p>Placeholder: a wide screenshot showing the “media detected” state.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="features" class="section split reverse">
        <div class="splitText">
          <h2>Features</h2>
          <p class="lead">A tight core + an extensible UI for apps, options, and a living console-like experience.</p>
          <div class="chips">
            <span class="chip">Plug & Play</span>
            <span class="chip">Retro UX</span>
            <span class="chip">Apps & Widgets</span>
            <span class="chip">Saves</span>
            <span class="chip">OTA</span>
            <span class="chip">Themes</span>
          </div>
          <div class="grid two">
            <div class="card"><h3>Plug & Play</h3><p>Detect mounted drives and boot fast.</p></div>
            <div class="card"><h3>Retro UX</h3><p>CRT vibe, scanlines, audio feedback.</p></div>
            <div class="card"><h3>Apps & Widgets</h3><p>Extensible UI with bundled tools.</p></div>
            <div class="card"><h3>Saves</h3><p>Save data management (evolving).</p></div>
            <div class="card"><h3>OTA updates</h3><p>Update flow designed for appliances.</p></div>
            <div class="card"><h3>Themes</h3><p>Multiple looks and styles.</p></div>
          </div>
        </div>
        <div class="splitMedia">
          <div class="crt">
            <div class="placeholder">
              <strong>Features screenshot</strong>
              <p>Placeholder: Apps gallery / Options screen with a strong visual.</p>
            </div>
          </div>
        </div>
      </section>

      <section id="gallery" class="section">
        <h2>Gallery</h2>
        <div class="gallery">
          <div class="placeholder">
            <strong>Main screen</strong>
            <p>Placeholder: screenshot of Main view with media inserted.</p>
          </div>
          <div class="placeholder">
            <strong>Menu</strong>
            <p>Placeholder: screenshot showing Menu options.</p>
          </div>
          <div class="placeholder">
            <strong>Apps / Options</strong>
            <p>Placeholder: screenshot showing Apps gallery / Options config.</p>
          </div>
        </div>
      </section>

      <section id="download" class="download">
        <h2>Download</h2>
        <p class="muted">Latest release: <span id="releaseTag">—</span></p>
        <div class="cta">
          <a class="btn" id="downloadPrimary" href="https://github.com/Neburb/anestation-pages/releases" target="_blank" rel="noreferrer">Open releases</a>
          <a class="btn secondary" id="downloadSecondary" href="https://github.com/Neburb/anestation-pages" target="_blank" rel="noreferrer">View repo</a>
        </div>
        <p class="note" id="downloadNote">Loading latest release…</p>
      </section>

      <section id="status" class="status section">
        <h2>Project status</h2>
        <ul>
          <li>Landing page: online</li>
          <li>Core app: active development</li>
        </ul>
        <p class="note">Want to help? Open an issue or propose a PR.</p>
      </section>

      <section id="faq" class="section">
        <h2>FAQ</h2>
        <div class="faq">
          <details>
            <summary>Is AneStation an emulator?</summary>
            <p>No. It’s a launcher shell. Emulation is handled by whatever you configure to run.</p>
          </details>
          <details>
            <summary>Which platforms are supported?</summary>
            <p>Placeholder: list target OS (Windows first) and future plans.</p>
          </details>
          <details>
            <summary>How do updates work?</summary>
            <p>Placeholder: describe OTA behavior and update prompts.</p>
          </details>
        </div>
      </section>

      <footer class="footer">
        <p>
          © <span id="y"></span> AneStation · <a href="https://github.com/Neburb/AneStation" target="_blank" rel="noreferrer">Source</a>
        </p>
      </footer>
    </main>

    <script>
      document.getElementById('y').textContent = new Date().getFullYear();

      const pickPrimaryAsset = (assets) => {
        if (!Array.isArray(assets)) return null;
        // Prefer Windows portable exe; fallback to first asset.
        const exe = assets.find(a => typeof a?.name === 'string' && a.name.toLowerCase().endsWith('.exe'));
        return exe ?? assets[0] ?? null;
      };

      fetch('./latest.json', { cache: 'no-store' })
        .then(r => r.json())
        .then((data) => {
          const tag = data?.tag ?? null;
          const assets = data?.assets ?? [];
          const primary = pickPrimaryAsset(assets);

          const releaseTag = document.getElementById('releaseTag');
          const releaseMeta = document.getElementById('releaseMeta');
          const note = document.getElementById('downloadNote');
          const primaryBtn = document.getElementById('downloadPrimary');
          const secondaryBtn = document.getElementById('downloadSecondary');

          if (tag) {
            releaseTag.textContent = tag;
            releaseMeta.textContent = `Latest release: ${tag}`;
          } else {
            releaseMeta.textContent = '';
          }

          const htmlUrl = data?.htmlUrl || 'https://github.com/Neburb/AneStation';
          secondaryBtn.href = htmlUrl;

          if (primary?.url) {
            primaryBtn.href = primary.url;
            primaryBtn.textContent = `Download ${primary.name || tag || ''}`.trim();
            note.textContent = primary.size ? `File size: ${primary.size}` : 'Ready.';
          } else {
            primaryBtn.href = htmlUrl;
            primaryBtn.textContent = tag ? `Open ${tag} release` : 'Open releases';
            note.textContent = 'No downloadable assets found (or not published yet).';
          }
        })
        .catch(() => {
          const note = document.getElementById('downloadNote');
          note.textContent = 'Could not load latest release info.';
        });
    </script>
  </body>
</html>
